{% extends "../base.html" %}
{% block header_section %}
<script type="text/javascript" src="{{ static_url("js/shortcuts.min.js") }}"></script>
<script type="text/javascript">
	$(function(){
		$('.manager-menu, .health-sub').addClass('active');
		var o_key = $('.breadcrumb').data('key');
		$('.networks').on({
			click:function(e){
				e.preventDefault();
				location.href='/redes_salud/gestion';
			}
		});
		$('.net').on({
			click:function(e){
				e.preventDefault();
				location.href='/municipios/gestion?id_red='+o_key.red;
			}
		});
		$('.mup').on({
			click:function(e){
				e.preventDefault();
				location.href='/comunidades/gestion?id_mup='+o_key.mup;
			}
		});
		$('.back').on({
			click:function(e){
				e.preventDefault();
				location.href='centros_salud/gestion?id_com='+$('input[name=id_com]').val();
			}
		});
		$('form').on({
			submit:function(e){
				var o_form = $(this), btn_submit = $('button[type=submit]');
				btn_submit.disable().hide();
				$.post(
					'/comunidades/modificar_comunidad',
					data = o_form.form2Dict(),
					function(response){
						if(response){
							location.href='centros_salud/gestion?id_com='+$('input[name=id_com]').val();
						} else{
							btn_submit.enable().show();
						}
					}
				);
			}
		});
	});
</script>
{% end %}
{% block breadcrumbs %}
<ul id="breadcrumbs" class="breadcrumb" data-key='{"red":{{com.municipio.red_salud.id_red}},"mup":{{com.municipio.id_mup}}}'>
	<li><a href="/">Inicio</a></li>
	<li><a href="#" class="networks">Redes de Salud</a></li>
	<li><a href="#" class="net">Red: {{com.municipio.red_salud}}</a></li>
	<li><a href="#" class="mup">Municipio: {{com.municipio}}</a></li>
	<li><a href="#" class="back">Comunidad: {{com}}</a></li>
	<li class="active">Modificar Comunidad</li>
</ul>
{% end %}
{% block left-content %}
<form>
	{% module xsrf_form_html() %}
	<input type="hidden" name="id_com" value="{{com.id_com}}" readonly>
	<div class="form-group">
		<legend>Modificar Comunidad</legend>
	</div>
	<div class="row">
		<div class="form-group has-feedback col-sm-7">
			<label for="inputNombre">Nombre:</label>
			<input type="text" name="nombre" value="{{com.nombre}}" id="inputNombre" class="form-control input-sm only_g_names" required>
			<span class="form-control-feedback"></span>
		</div>
		<div class="form-group has-feedback col-sm-5">
			<label for="inputTelf">Celular:</label>
			<input type="text" name="telf" value="{{com.telf}}" id="inputTelf" class="form-control input-sm only_cell_phone">
			<span class="form-control-feedback"></span>
		</div>
	</div>
	<div class="form-group">
		<button type="button" class="back btn btn-sm btn-warning">Regresar</button>
		<button type="submit" class="btn btn-sm btn-primary">{% if com.activo %}Actualizar{% else %}Habilitar{% end %}</button>
	</div>
</form>
{% end %}