/*!
 * auhtor: Luis Eduardo Miranda Barja
 * (C) 2015 - mbarjaedu13@gmail.com
 */
$(function(){$(".user-profile").addClass("active");$(".back").on({click:function(d){d.preventDefault();location.href="/";}});var b=$("input[name=ci]").val(),c=$("#cellphone").val(),a=$("input[name=login]").val();$("input[name=ci]").on({keyup:function(h){h.preventDefault();var g=$(this),f=$(this).val(),d=$(this).data("pattern");if(f.match(d)){if(b!=f){$.post("/personas/v_ci",data={_xsrf:getCookie("_xsrf"),ci:f},function(e){if(e){swal({title:"Error",text:f+", está registrado con otra persona!",type:"error",confirmButtonText:"Continuar",confirmButtonClass:"btn-primary"});g.val(b);}});}}}});$("#cellphone").on({keyup:function(h){h.preventDefault();var g=$(this),f=$(this).val(),d=$(this).data("pattern");if(f.match(d)){if(c!=f){$.post("/personas/v_userstelf",data={_xsrf:getCookie("_xsrf"),telf:f},function(e){if(e){swal({title:"Error",text:f+", está registrado con otra persona!",type:"error",confirmButtonText:"Continuar",confirmButtonClass:"btn-primary"});g.val(c);}});}}}});$("input[name=login]").on({blur:function(h){h.preventDefault();var d=$(this),g=$(this).val(),f=$(this).data("pattern");if(g.match(f)){if(a!=g){$.post("/usuarios/v_login",data={_xsrf:getCookie("_xsrf"),login:g},function(e){if(e){swal({title:"Error",text:g+", está registrado con otro usuario!",type:"error",confirmButtonText:"Continuar",confirmButtonClass:"btn-primary"});}});}}}});$("form").on({submit:function(g){g.preventDefault();g.stopPropagation();var d=$(this).form2Dict(),f=$("button[type=submit]");$.post("/usuarios/profile",data=d,function(e){if(e){location.href="/";}else{f.enable();}});}});});